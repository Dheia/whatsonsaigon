<div class="modal-body">
	<div class="control-toolbar">
		<div class="toolbar-item toolbar-primary">
			<div data-control="toolbar">
				<button class="btn btn-success oc-icon-download"
					disabled="disabled"
					onclick="$(this).data('request-data', { checked: $( '#list-packages' ).serialize() })"
					data-request="onInstallPakages"
					data-request-confirm="You want to install this packages?"
					data-trigger-action="enable"
					data-trigger=".control-list input[type=checkbox]"
					data-trigger-condition="checked"
					data-request-success="$(this).prop('disabled', false)"
					data-request-update="'list':'#packages-list'"
					data-stripe-load-indicator>
					<?= e(trans('netsti.frontend::lang.fields.install')) ?>
				</button>
			</div>
		</div>
		<div class="toolbar-item" style="width: 210px">
			<form method="POST" id="search-form" data-request="onSearchPackage" data-request-update="'packages': '#result'" data-stripe-load-indicator>
				<input placeholder="<?= e(trans('netsti.frontend::lang.fields.search_packages')) ?>" type="text" name="q" id="search-packages" class="form-control icon search" />
			</form>
		</div>
	</div>
</div>
<div id="result">
	<?= $this->listSearchPackages() ?>
</div>
<div class="modal-footer">
	<button
	type="button"
	class="btn btn-default"
	data-dismiss="popup">
	<?= e(trans('backend::lang.form.close')) ?>
</button>
</div>


<script>

	var typingTimer;
	var doneTypingInterval = 1000;
	var $input = $('#search-packages');

	$input.on('keyup', function () {
		clearTimeout(typingTimer);
		typingTimer = setTimeout(doneTyping, doneTypingInterval);
	});

	$input.on('keydown', function () {
		clearTimeout(typingTimer);
	});

	function doneTyping () {
		$('#search-form').submit();
	}
</script>